from flask import Flask, render_template,request, jsonify
app = Flask(__name__)

movies = [
    {"title": "Ирония судьбы", "genre": "Комедия", "age_rating": "12+", "year": 1975, "image" : "https://avatars.mds.yandex.net/i?id=85018b87656b4cc4dc87f374dab6d1d1_l-5192585-images-thumbs&n=13", "info" : "31 декабря пошли друзья в баню попариться, по традиции смыть с себя все плохое, чтобы встретить Новый год чистыми, а «напарились» до такой степени (пивом и водкой), что отправили в Ленинград не того."},
    {"title": "Оно", "genre": "Ужасы", "age_rating": "16+", "year": 2017, "image" : "https://avatars.dzeninfra.ru/get-zen_doc/271828/pub_65b45e2d98779f1cacad455d_65b462ae0a0e6d0513caceed/scale_1200", "info" : "Когда в городке Дерри штата Мэн начинают пропадать дети, несколько ребят сталкиваются со своими величайшими страхами — не только с группой школьных хулиганов, но со злобным клоуном Пеннивайзом, список жертв которого уходит вглубь веков."},
    {"title": "Матрица", "genre": "Фантастика", "age_rating": "16+", "year": 1999, "image" : "https://avatars.mds.yandex.net/i?id=6b88d5c41634b799beb94b8e6da36e07_l-4303535-images-thumbs&n=13", "info" : "Жизнь Томаса Андерсона разделена на две части: днём он — самый обычный офисный работник, получающий нагоняи от начальства, а ночью превращается в хакера по имени Нео, и нет места в сети, куда он бы не смог проникнуть. Но однажды всё меняется. Томас узнаёт ужасающую правду о реальности."},
    {"title": "Достучаться до небес", "genre": "Драма", "age_rating": "16+", "year": 1997, "image" : "https://static.okko.tv/images/v4/94423745-9dce-487c-b126-e72b1c4d234d", "info" : "Волею судеб две абсолютные противоположности, тихоня Руди и разгильдяй Мартин, оказываются в одной больничной палате. Узнав неутешительные прогнозы, друзья решают использовать последние дни на полную катушку — угнать машину с деньгами, напиться текилы, и, конечно, увидеть море."},
    {"title": "Крепкий орешек", "genre": "Боевик", "age_rating": "18+", "year": 1988, "image" : "https://static.okko.tv/images/v4/74cf1bca-3878-4841-989d-40c78a9f6396", "info" : "В суперсовременном небоскребе Лос-Анджелеса полицейский Джон Макклейн ведет смертельную схватку с бандой политических террористов, взявших в заложники два десятка человек, в число которых попадает и его жена. Началось все с того, что парень приехал в город к жене, оказался на рождественском приеме, а кончилось настоящей войной..."},
    {"title": "Шерлок Холмс", "genre": "Детектив", "age_rating": "12+", "year": 2009, "image" : "https://avatars.dzeninfra.ru/get-zen_doc/271828/pub_6543efd38b85625d917eb8cb_6543f11a0aa2423ce6cd8883/scale_1200", "info" : "Величайший в истории сыщик Шерлок Холмс вместе со своим верным соратником Ватсоном вступают в схватку, требующую нешуточной физической и умственной подготовки, ведь их враг представляет угрозу для всего Лондона."},
    {"title": "Интерстеллар", "genre": "Научное", "age_rating": "12+", "year": 2014, "image" : "https://cs12.pikabu.ru/post_img/2020/11/07/6/og_og_1604736347254738206.jpg", "info" : "Когда засуха, пыльные бури и вымирание растений приводят человечество к продовольственному кризису, коллектив исследователей и учёных отправляется сквозь червоточину (которая предположительно соединяет области пространства-времени через большое расстояние) в путешествие, чтобы превзойти прежние ограничения для космических путешествий человека и найти планету с подходящими для человечества условиями."},
    {"title": "Ромео и Джульетта", "genre": "Трагедия", "age_rating": "12+", "year": 2013, "image" : "https://static.kinoafisha.info/k/movie_posters/1920x1080/upload/movie_posters/2/1/5/8142512/4a1396ee3b3d774fd15d5776e62e2e91.jpg", "info" : "Верона. Эпоха Раннего Возрождения. Юноша и девушка из враждующих семей влюбляются друг в друга. Рок не дает им быть вместе. Лишь смерть на пике запретной страсти помогает Ромео и Джульетте спасти свою любовь."},
    {"title": "Молчание ягнят", "genre": "Триллер", "age_rating": "18+", "year": 1991, "image" : "https://static.kinoafisha.info/k/movie_posters/1920x1080/upload/movie_posters/4/0/8/3906804/92ec465a68dfd9ac388cf7c1c7339e57.jpeg", "info" : "Психопат похищает и убивает молодых женщин по всему Среднему Западу. ФБР, уверенное, что все преступления совершены одним и тем же человеком, поручает агенту Клариссе Старлинг встретиться с заключенным-маньяком Ганнибалом Лектером, который мог бы помочь составить психологический портрет убийцы. Сам Лектер отбывает наказание за убийства и каннибализм. Он согласен помочь Клариссе лишь в том случае, если она попотчует его больное воображение подробностями своей личной жизни."},
    {"title": "Титаник", "genre": "Драма", "age_rating": "12+", "year": 1997, "image" : "https://avatars.mds.yandex.net/i?id=a3b4ef2c9fd4b047c1590ed013665be7_l-10471914-images-thumbs&n=13", "info" : "Апрель 1912 года. В первом и последнем плавании шикарного «Титаника» встречаются двое. Пассажир нижней палубы Джек выиграл билет в карты, а богатая наследница Роза отправляется в Америку, чтобы выйти замуж по расчёту. Чувства молодых людей только успевают расцвести, и даже не классовые различия создадут испытания влюблённым, а айсберг, вставший на пути считавшегося непотопляемым лайнера."},
    {"title": "Операция «Ы» и другие приключения Шурика", "genre": "Комедия", "age_rating": "12+", "year": 1965, "image": "https://avatars.mds.yandex.net/i?id=a0edc67fe395cf55bb5ba1b7429ba5300b4d01ad-5849765-images-thumbs&n=13", "info" : "Студент Шурик попадает в самые невероятные ситуации: сражается с хулиганом Верзилой, весьма оригинальным способом готовится к экзамену и предотвращает «ограбление века», на которое идёт троица бандитов — Балбес, Трус и Бывалый."},  
    {"title": "Бриллиантовая рука", "genre": "Комедия", "age_rating": "12+", "year": 1968, "image": "https://avatars.mds.yandex.net/i?id=b1b72f7bb10b7273e5d641c4fb6006bebe150d79-5878159-images-thumbs&n=13", "info" : "В южном городке орудует шайка валютчиков, возглавляемая Шефом и его помощником Графом (в быту — Геной Козодоевым). Скромный советский служащий и примерный семьянин Семен Семенович Горбунков отправляется в зарубежный круиз на теплоходе, где также плывет Граф, который должен забрать бриллианты в одном из восточных городов и провезти их в загипсованной руке. Но из-за недоразумения вместо жулика на условленном месте падает ничего не подозревающий Семен Семенович, и драгоценный гипс накладывают ему."},  
    {"title": "Один дома", "genre": "Комедия", "age_rating": "6+", "year": 1990, "image": "https://avatars.mds.yandex.net/get-kinopoisk-image/4303601/8438872f-1964-4658-a6eb-230f7e33b165/3840x", "info" : "Американское семейство отправляется из Чикаго в Европу, но в спешке сборов бестолковые родители забывают дома... одного из своих детей. Юное создание, однако, не теряется и демонстрирует чудеса изобретательности. И когда в дом залезают грабители, им приходится не раз пожалеть о встрече с милым крошкой."},  
    {"title": "Мальчишник в Вегасе", "genre": "Комедия", "age_rating": "18+", "year": 2009, "image": "https://avatars.dzeninfra.ru/get-zen_doc/271828/pub_669c02cd5de5626edd82e4f3_669cecc09c015076f8e867fe/scale_1200", "info" : "Они мечтали устроить незабываемый мальчишник в Вегасе. Но теперь им необходимо вспомнить, что именно произошло: что за ребенок сидит в шкафу номера отеля? Как в ванную попал тигр? Почему у одного из них нет зуба? И, самое главное, куда делся жених? То, что парни вытворяли на вечеринке, не идет ни в какое сравнение с тем, что им придется сделать на трезвую голову, когда они будут шаг за шагом восстанавливать события прошлой ночи."},  
    {"title": "Тот самый Мюнхгаузен", "genre": "Комедия", "age_rating": "12+", "year": 1979, "image": "https://a.d-cd.net/DvyfjMmjO_gKd1UYFFIbTt2qZIs-1920.jpg", "info" : "Комическая фантазия о жизни, любви и смерти знаменитого барона Мюнхгаузена, жившего в XVIII веке и ставшего героем многих веселых книг и преданий, опирается на персонажей и эпизоды знаменитого романа Р. Распе, но по сути является самостоятельным произведением. «Мыслящий человек просто обязан время от времени поднимать себя за волосы» - похоже, это и удается авторам картины. Барон хочет жениться на любимой им Марте, но церковь отказывается обвенчать их, так как имеется живая жена, «усмирявшая его 20 лет». Уставшая Марта хочет, чтобы барон стал таким, как все, но барон этого не хочет, да и не может. Герцог разрешит брак только в том случае, если барон письменно подтвердит, что все его истории лживы, а он сам - обыкновенный человек."},  
    {"title": "Пила", "genre": "Ужасы", "age_rating": "18+", "year": 2004, "image": "https://avatars.mds.yandex.net/get-mpic/11763878/2a0000018b4350d12cd27ee73f9ee808f307/orig", "info" : "Два незнакомца просыпаются в подвале, где лежит человек с простреленной головой и пистолетом в руке. Они прикованы к стенам цепями и не помнят, как тут оказались. Голос с найденной плёнки велит одному из них выбрать — убить товарища по несчастью или дать умереть своим жене и дочери. Так начинается жестокая игра, у невольных участников которой есть всего лишь 7 часов."},  
    {"title": "Звонок", "genre": "Ужасы", "age_rating": "16+", "year": 2002, "image": "https://avatars.dzeninfra.ru/get-zen_doc/10384921/pub_634c661148ecfb0f0020a1a0_64cacb6a1a2d2135217f01db/scale_1200", "info" : "Телефонный звонок раздаётся после просмотра некой загадочной видеокассеты. Жертве даётся ровно семь дней, а после следует неминуемая смерть. Журналистка Рэйчел расследует загадочные смерти молодых людей, и случайно кассета-убийца попадает в руки к её маленькому сыну, над которым теперь нависает смертельная угроза. У женщины есть только семь дней, чтобы разобраться в происходящем и спасти своего мальчика."},    
    {"title": "Реинкарнация", "genre": "Ужасы", "age_rating": "18+", "year": 2018, "image": "http://avatars.mds.yandex.net/get-vthumb/3187201/30c70756df9e05fe6893c5fbaddfc22d/800x450", "info" : "После смерти матери в ранее спокойном доме Энни начинает твориться нечто необъяснимое. Теперь под угрозой жизнь её близких, и с каждым днём открываются новые ужасающие секреты семьи."},    
    {"title": "Пulp Fiction", "genre": "Криминал", "age_rating": "18+", "year": 1994, "image": "https://avatars.mds.yandex.net/i?id=0c926e1dd58a6a0b5475fe968e87df069d044851-12601053-images-thumbs&n=13", "info" : "Двое бандитов Винсент Вега и Джулс Винфилд ведут философские беседы в перерывах между разборками и решением проблем с должниками криминального босса Марселласа Уоллеса. В первой истории Винсент проводит незабываемый вечер с женой Марселласа Мией. Во второй Марселлас покупает боксёра Бутча Кулиджа, чтобы тот сдал бой. В третьей истории Винсент и Джулс по нелепой случайности попадают в неприятности."},    
    {"title": "Город Бога", "genre": "Криминал", "age_rating": "18+", "year": 2002, "image": "https://static.okko.tv/images/v4/eab2fc68-ef64-4900-afd5-4f27b5b996eb", "info" : "Город Бога — самая опасная фавела Рио-де-Жанейро, и именно здесь растут трое детей: Ракета, Малыш Фишка и Бенни. Поначалу они только наблюдают, как другие подростки грабят мотели и мелкие лавки, но круговорот насилия затягивает и их. Фишка — теперь Малыш Зе, главный наркоторговец и гроза всего района. Бенни — его лучший друг и правая рука, но его тяготит криминальный образ жизни. И только Ракете удается оставаться в стороне. Он мечтает стать фотографом и становится свидетелем и собирателем хроники гангстерских разборок, утопивших Город Бога в крови."},  
    {"title": "Властелин колец: Братство Кольца", "genre": "Фэнтези", "age_rating": "12+", "year": 2001, "image": "http://avatars.mds.yandex.net/get-vthumb/3072928/be06f7610fe84215231573972ea9a9c2/800x450", "info" : "Сказания о Средиземье — это хроника Великой войны за Кольцо, длившейся не одну тысячу лет. Тот, кто владел Кольцом, получал неограниченную власть, но был обязан служить злу. Тихая деревня, где живут хоббиты. Придя на 111-й день рождения к своему старому другу Бильбо Бэггинсу, волшебник Гэндальф начинает вести разговор о кольце, которое Бильбо нашел много лет назад. Это кольцо принадлежало когда-то темному властителю Средиземья Саурону, и оно дает большую власть своему обладателю. Теперь Саурон хочет вернуть себе власть над Средиземьем. Бильбо отдает Кольцо племяннику Фродо, чтобы тот отнёс его к Роковой Горе и уничтожил."},  
    {"title": "Гладиатор", "genre": "Исторический", "age_rating": "16+", "year": 2000, "image": "https://images.kinorium.com/movie/poster/143897/w1500_50457996.jpg", "info" : "Римская империя. Бесстрашного и благородного генерала Максимуса боготворят солдаты, а старый император Марк Аврелий безгранично доверяет ему и относится как к сыну. Однако опытный воин, готовый сразиться с любым противником в честном бою, оказывается бессильным перед коварными придворными интригами. Коммод, сын Марка Аврелия, убивает отца, который планировал сделать преемником не его, а Максимуса, и захватывает власть. Решив избавиться от опасного соперника, который к тому же отказывается присягнуть ему на верность, Коммод отдаёт приказ убить Максимуса и всю его семью. Чудом выжив, но не сумев спасти близких, Максимус попадает в плен к работорговцу, который продаёт его организатору гладиаторских боёв Проксимо. Так легендарный полководец становится гладиатором. Но вскоре ему представится шанс встретиться со своим смертельным врагом лицом к лицу."},  
    {"title": "Оппенгеймер", "genre": "Исторический", "age_rating": "18+", "year": 2023, "image": "https://static.kinoafisha.info/k/movie_posters/1920x1080/upload/movie_posters/9/1/7/6888719/04c12a356a6e0e86991b4a8a8a0e1d1b.jpg", "info" : "История жизни американского физика-теоретика Роберта Оппенгеймера, который во времена Второй мировой войны руководил Манхэттенским проектом — секретными разработками ядерного оружия."},
    {"title": "Дюна", "genre": "Фантастика", "age_rating": "12+", "year": 2021, "image": "https://static.kinoafisha.info/k/movie_posters/1920x1080/upload/movie_posters/5/0/8/6888050/5a9e5a8e5e5a5e5a5e5a5e5a5e5a5e5a.jpg", "info" : "Наследник знаменитого дома Атрейдесов Пол отправляется вместе с семьей на одну из самых опасных планет во Вселенной — Арракис. Здесь нет ничего, кроме песка, палящего солнца, гигантских чудовищ и основной причины межгалактических конфликтов — невероятно ценного ресурса, который называется меланж. В результате захвата власти Пол вынужден бежать и скрываться, и это становится началом его эпического путешествия. Враждебный мир Арракиса приготовил для него множество тяжелых испытаний, но только тот, кто готов взглянуть в глаза своему страху, достоин стать избранным."},
    {"title": "Топ Ган: Мэверик", "genre": "Боевик", "age_rating": "12+", "year": 2022, "image": "https://static.kinoafisha.info/k/movie_posters/1920x1080/upload/movie_posters/3/0/8/6888030/5a9e5a8e5e5a5e5a5e5a5e5a5e5a5e5a.jpg", "info" : "Пит Митчелл по прозвищу Мэверик более 30 лет остается одним из лучших пилотов ВМФ: бесстрашный летчик-испытатель, он расширяет границы возможного и старательно избегает повышения в звании, которое заставило бы его приземлиться навсегда. Приступив к подготовке отряда выпускников «Топ Ган» для специальной миссии, Мэверик встречает лейтенанта Брэдли Брэдшоу — сына своего покойного друга, лейтенанта Ника Брэдшоу. Впереди — неопределенность, за спиной — призраки прошлого. Мэверик вынужден противостоять своим глубинным страхам, которые грозят ожить в рамках миссии, требующей исключительной самоотверженности от тех, кто будет назначен на вылет."},
    {"title": "Кот в сапогах: Последнее желание", "genre": "Мультфильм", "age_rating": "6+", "year": 2022, "image": "https://static.kinoafisha.info/k/movie_posters/1920x1080/upload/movie_posters/9/0/8/6888090/5a9e5a8e5e5a5e5a5e5a5e5a5e5a5e5a.jpg", "info" : "Промотав восемь жизней из девяти и до смерти испугавшись пришедшего за ним волка-охотника за головами, Кот в сапогах внимает совету врача и заселяется в дом местной кошатницы. Там он смиряется с установленными порядками, отращивает бороду и теряет тягу к подвигам и приключениям, но только до тех пор, пока не узнаёт о волшебной карте, которая указывает путь к где-то упавшей Звезде желаний. Кот в сапогах твёрдо решает отыскать Звезду, чтобы вернуть свои жизни, и в компании притворявшегося кошачьим пёсика отправляется красть карту у известного коллекционера волшебных предметов Джека Хорнера."},
    {"title": "Барби", "genre": "Комедия", "age_rating": "12+", "year": 2023, "image": "https://static.kinoafisha.info/k/movie_posters/1920x1080/upload/movie_posters/7/1/8/6888170/5a9e5a8e5e5a5e5a5e5a5e5a5e5a5e5a.jpg", "info" : "Самая обыкновенная стереотипная Барби живёт в великолепном розовом Барбиленде, и каждый её день идеален. Она меняет наряды, загорает на пляже, проводит время с другими Барби, день заканчивается шумной вечеринкой с танцами, и в этой позитивной кутерьме с блёстками влюблённый Кен — всего лишь приложение к Барби. Однажды куклу посещают мысли о смерти, и её сделанные под туфли с каблуками ноги вдруг становятся плоскими. Чтобы разобраться в происходящем и вернуть привычный пластмассовый мир, Барби придётся отправиться в мир реальный и найти там свою девочку-хозяйку. За ней увязывается не мыслящий жизни без своего кумира Кен."},
    {"title": "Аватар: Путь воды", "genre": "Фантастика", "age_rating": "12+", "year": 2022, "image": "https://static.kinoafisha.info/k/movie_posters/1920x1080/upload/movie_posters/2/0/8/6888020/5a9e5a8e5e5a5e5a5e5a5e5a5e5a5e5a.jpg", "info" : "После принятия образа аватара солдат Джейк Салли становится предводителем народа на'ви и берет на себя миссию по защите новых друзей от корыстных бизнесменов с Земли. Теперь ему есть за кого бороться — с Джейком его прекрасная возлюбленная Нейтири. Когда на Пандору возвращаются до зубов вооруженные земляне, Джейк готов дать им отпор."},
    {"title": "Майор Гром: Чумной Доктор", "genre": "Боевик", "age_rating": "16+", "year": 2021, "image": "https://static.kinoafisha.info/k/movie_posters/1920x1080/upload/movie_posters/1/1/8/6888110/5a9e5a8e5e5a5e5a5e5a5e5a5e5a5e5a.jpg", "info" : "Майор полиции Игорь Гром известен всему Санкт-Петербургу пробивным характером и непримиримой позицией по отношению к преступникам всех мастей. Неимоверная сила, аналитический склад ума и неподкупность — всё это делает майора Грома идеальным полицейским. Но всё резко меняется с появлением человека в маске Чумного Доктора. Заявив, что его город «болен чумой беззакония», он принимается за «лечение», убивая людей, которые в своё время избежали наказания при помощи денег и влияния. Общество взбудоражено. Полиция бессильна. Игорь впервые сталкивается с трудностями в расследовании, от итогов которого может зависеть судьба всего города."},
    {"title": "Нет", "genre": "Ужасы", "age_rating": "16+", "year": 2022, "image": "https://static.kinoafisha.info/k/movie_posters/1920x1080/upload/movie_posters/4/1/8/6888140/5a9e5a8e5e5a5e5a5e5a5e5a5e5a5e5a.jpg", "info" : "Через полгода после смерти отца в результате нелепого несчастного случая брат с сестрой, Оджей и Эмеральд, пытаются удержать на плаву семейный бизнес — ранчо с лошадьми для съёмок в кино и рекламе. Дела идут из рук вон плохо, часть животных пришлось продать, и Оджей уже подумывает избавиться и от ранчо, когда вдруг замечает в окрестностях НЛО. Ребята видят в этом возможность заработка и решают заснять его любой ценой."},
    {"title": "Гнев человеческий", "genre": "Триллер", "age_rating": "18+", "year": 2021, "image": "https://static.kinoafisha.info/k/movie_posters/1920x1080/upload/movie_posters/6/1/8/6888160/5a9e5a8e5e5a5e5a5e5a5e5a5e5a5e5a.jpg", "info" : "Грузовики лос-анджелесской инкассаторской компании Fortico Security часто подвергаются нападениям, и во время очередного ограбления погибают оба охранника. Через некоторое время в компанию устраивается крепкий немногословный британец Патрик Хилл. Он получает от босса прозвище Эйч и, впритык к необходимому минимуму пройдя тесты по фитнесу, стрельбе и вождению, отправляется на первое задание. Вскоре и его грузовик пытаются ограбить вооруженные налётчики, но Эйч в одиночку расправляется с целой бандой и становится героем. Кажется, слава и уважение коллег его совершенно не интересуют, ведь он преследует свои цели."},
    {"title": "Крушение", "genre": "Триллер", "age_rating": "16+", "year": 2023, "image": "https://static.kinoafisha.info/k/movie_posters/1920x1080/upload/movie_posters/8/1/8/6888180/5a9e5a8e5e5a5e5a5e5a5e5a5e5a5e5a.jpg", "info" : "Пилоту Броуди Торрансу удаётся успешно посадить повреждённый штормом самолёт на враждебной территории. Вскоре выясняется, что уцелевшим угрожают местные повстанцы, которые хотят захватить пассажиров в заложники. Броуди должен защитить людей, пока не прибудет помощь."},
]


@app.route("/")
def slide1():
    return render_template("s1.html")

@app.route('/search', methods=['POST'])
def search():
    data = request.json
    genre = data.get('genre')
    age_rating = data.get('age_rating')
    
    filtered_movies = movies
    
    if genre and genre != 'Любой':
        filtered_movies = [m for m in filtered_movies if m['genre'] == genre]
    
    if age_rating and age_rating != 'Любое':
        filtered_movies = [m for m in filtered_movies if m['age_rating'] == age_rating]
    
    return jsonify(filtered_movies)

@app.route("/movie/<title>")
def movie_detail(title):
    movie = next((m for m in movies if m["title"] == title), None)
    if movie:
        return render_template("s2.html", movie=movie)
    return "Фильм не найден", 404

if __name__ == "__main__":
    app.run(debug=True)